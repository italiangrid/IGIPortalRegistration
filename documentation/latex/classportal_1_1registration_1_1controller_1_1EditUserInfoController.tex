\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController}{
\section{portal.registration.controller.EditUserInfoController Class Reference}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController}\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
}


Collaboration diagram for portal.registration.controller.EditUserInfoController:
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
String \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a09ee8e90312405588fd950063bb797e4}{showEditUserInfoForm} (@RequestParam int userId, RenderRequest request)
\item 
void \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_af4b8f77882febac15cb98813ad8b89da}{editUserInfo} (@ModelAttribute(\char`\"{}userInfo\char`\"{}) UserInfo userInfo, ActionRequest request, ActionResponse response, SessionStatus sessionStatus)  throws SystemException 
\item 
String \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a4c6f1ba65b8e273d4d797460dc4ccfe0}{getDefaultVo} (@RequestParam int userId)
\item 
String \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a1b09df477dad855f216695324332048e}{getDefaultFqan} (@RequestParam int userId)
\item 
\hyperlink{classportal_1_1registration_1_1domain_1_1UserInfo}{UserInfo} \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a3d4be346ddb5fe32799a2c2298f032de}{getUserInfo} (@RequestParam int userId)
\item 
List$<$ \hyperlink{classportal_1_1registration_1_1domain_1_1Certificate}{Certificate} $>$ \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_ac6fa84cda72409ea5928359f60c6cf7c}{getListCert} (@RequestParam int userId)
\item 
List$<$ \hyperlink{classportal_1_1registration_1_1domain_1_1Vo}{Vo} $>$ \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a1b6482d97146c7f03383907df1ff7513}{getUserToVoList} (@RequestParam int userId)
\item 
void \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a3b8074d37864402deee109774e44ea3d}{uploadComplete} (ActionResponse response, SessionStatus sessionStatus)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a9d4f65b993d3f9b6f978bcaa7c51aede}{deactivateUser} (int userId, RenderRequest request)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{interfaceportal_1_1registration_1_1services_1_1UserInfoService}{UserInfoService} \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a92a1c1746c66dbf600394d8b042acc65}{userInfoService}
\item 
\hyperlink{interfaceportal_1_1registration_1_1services_1_1CertificateService}{CertificateService} \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_ad152ea56d1ec9c7cb1f0f79d0a6008c4}{certificateService}
\item 
\hyperlink{interfaceportal_1_1registration_1_1services_1_1UserToVoService}{UserToVoService} \hyperlink{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a5b22c5c2153cf26ed9ce7c515b29af04}{userToVoService}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 39 of file EditUserInfoController.java.



\subsection{Member Function Documentation}
\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a9d4f65b993d3f9b6f978bcaa7c51aede}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!deactivateUser@{deactivateUser}}
\index{deactivateUser@{deactivateUser}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{deactivateUser}]{\setlength{\rightskip}{0pt plus 5cm}void portal.registration.controller.EditUserInfoController.deactivateUser (
\begin{DoxyParamCaption}
\item[{int}]{userId, }
\item[{RenderRequest}]{request}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a9d4f65b993d3f9b6f978bcaa7c51aede}


Definition at line 62 of file EditUserInfoController.java.



References portal.registration.services.UserInfoService.edit(), portal.registration.services.UserInfoService.findById(), portal.registration.domain.UserInfo.getRegistrationComplete(), portal.registration.domain.UserInfo.getUsername(), and portal.registration.domain.UserInfo.setRegistrationComplete().


\begin{DoxyCode}
                                                                       {

                UserInfo userInfo = userInfoService.findById(userId);

                if (userInfo.getRegistrationComplete().equals("true")) {
                        String username = userInfo.getUsername();

                        long companyId = PortalUtil.getCompanyId(request);

                        User user;
                        try {
                                user = UserLocalServiceUtil.getUserByScreenName(c
      ompanyId,
                                                username);

                                UserLocalServiceUtil.deleteRoleUser((long) 10140,
      
                                                user.getUserId());

                                userInfo.setRegistrationComplete("false");

                                userInfoService.edit(userInfo);

                        } catch (PortalException e) {
                                SessionErrors.add(request, "exception-deactivatio
      n-user");
                                e.printStackTrace();
                        } catch (SystemException e) {
                                SessionErrors.add(request, "exception-deactivatio
      n-user");
                                e.printStackTrace();
                        }
                }

        }
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_af4b8f77882febac15cb98813ad8b89da}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!editUserInfo@{editUserInfo}}
\index{editUserInfo@{editUserInfo}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{editUserInfo}]{\setlength{\rightskip}{0pt plus 5cm}void portal.registration.controller.EditUserInfoController.editUserInfo (
\begin{DoxyParamCaption}
\item[{@ModelAttribute(\char`\"{}userInfo\char`\"{}) UserInfo}]{userInfo, }
\item[{ActionRequest}]{request, }
\item[{ActionResponse}]{response, }
\item[{SessionStatus}]{sessionStatus}
\end{DoxyParamCaption}
)  throws SystemException }}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_af4b8f77882febac15cb98813ad8b89da}


Definition at line 95 of file EditUserInfoController.java.



References portal.registration.services.UserInfoService.edit(), portal.registration.services.UserInfoService.findById(), portal.registration.domain.UserInfo.setFirstName(), and portal.registration.utils.MyValidator.validateUpdate().


\begin{DoxyCode}
                                                                            {

                ArrayList<String> errors = new ArrayList<String>();
                boolean allOk = true;
                UserInfo check = userInfoService.findById(userInfo.getUserId());
                if (MyValidator.validateUpdate(userInfo, check, errors)) {

                        try {
                                long companyId = PortalUtil.getCompanyId(request)
      ;
                                User user = UserLocalServiceUtil.getUserByScreenN
      ame(companyId,
                                                userInfo.getUsername());

                                user.setFirstName(userInfo.getFirstName());
                                user.setLastName(userInfo.getLastName());

                                UserLocalServiceUtil.updateUser(user);

                        } catch (Exception e) {
                                errors.add("problem-update-user-liferay");
                                allOk = false;
                        }

                        try {
                                userInfoService.edit(userInfo);
                        } catch (Exception e) {
                                errors.add("problem-update-user");
                                allOk = false;
                        }
                } else {
                        allOk = false;
                }
                if (allOk) {
                        SessionMessages.add(request, "user-updated-successufully"
      );
                } else {
                        errors.add("error-updating-user");

                        for (String error : errors) {
                                SessionErrors.add(request, error);
                        }
                }

                response.setRenderParameter("myaction", "editUserInfoForm");
                response.setRenderParameter("userId",
                                Integer.toString(userInfo.getUserId()));
                sessionStatus.setComplete();

        }
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a1b09df477dad855f216695324332048e}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!getDefaultFqan@{getDefaultFqan}}
\index{getDefaultFqan@{getDefaultFqan}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{getDefaultFqan}]{\setlength{\rightskip}{0pt plus 5cm}String portal.registration.controller.EditUserInfoController.getDefaultFqan (
\begin{DoxyParamCaption}
\item[{@RequestParam int}]{userId}
\end{DoxyParamCaption}
)}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a1b09df477dad855f216695324332048e}


Definition at line 151 of file EditUserInfoController.java.



References portal.registration.services.UserToVoService.getDefaultFqan().


\begin{DoxyCode}
                                                               {
                return userToVoService.getDefaultFqan(userId);
        }
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a4c6f1ba65b8e273d4d797460dc4ccfe0}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!getDefaultVo@{getDefaultVo}}
\index{getDefaultVo@{getDefaultVo}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{getDefaultVo}]{\setlength{\rightskip}{0pt plus 5cm}String portal.registration.controller.EditUserInfoController.getDefaultVo (
\begin{DoxyParamCaption}
\item[{@RequestParam int}]{userId}
\end{DoxyParamCaption}
)}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a4c6f1ba65b8e273d4d797460dc4ccfe0}


Definition at line 146 of file EditUserInfoController.java.



References portal.registration.services.UserToVoService.findDefaultVo().


\begin{DoxyCode}
                                                             {
                return userToVoService.findDefaultVo(userId);
        }
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_ac6fa84cda72409ea5928359f60c6cf7c}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!getListCert@{getListCert}}
\index{getListCert@{getListCert}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{getListCert}]{\setlength{\rightskip}{0pt plus 5cm}List$<${\bf Certificate}$>$ portal.registration.controller.EditUserInfoController.getListCert (
\begin{DoxyParamCaption}
\item[{@RequestParam int}]{userId}
\end{DoxyParamCaption}
)}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_ac6fa84cda72409ea5928359f60c6cf7c}


Definition at line 161 of file EditUserInfoController.java.



References portal.registration.services.CertificateService.findById().


\begin{DoxyCode}
                                                                       {
                return certificateService.findById(userId);
        }
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a3d4be346ddb5fe32799a2c2298f032de}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!getUserInfo@{getUserInfo}}
\index{getUserInfo@{getUserInfo}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{getUserInfo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf UserInfo} portal.registration.controller.EditUserInfoController.getUserInfo (
\begin{DoxyParamCaption}
\item[{@RequestParam int}]{userId}
\end{DoxyParamCaption}
)}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a3d4be346ddb5fe32799a2c2298f032de}


Definition at line 156 of file EditUserInfoController.java.



References portal.registration.services.UserInfoService.findById().


\begin{DoxyCode}
                                                              {
                return userInfoService.findById(userId);
        }
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a1b6482d97146c7f03383907df1ff7513}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!getUserToVoList@{getUserToVoList}}
\index{getUserToVoList@{getUserToVoList}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{getUserToVoList}]{\setlength{\rightskip}{0pt plus 5cm}List$<${\bf Vo}$>$ portal.registration.controller.EditUserInfoController.getUserToVoList (
\begin{DoxyParamCaption}
\item[{@RequestParam int}]{userId}
\end{DoxyParamCaption}
)}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a1b6482d97146c7f03383907df1ff7513}


Definition at line 166 of file EditUserInfoController.java.



References portal.registration.services.UserToVoService.findVoByUserId().


\begin{DoxyCode}
                                                                  {

                return userToVoService.findVoByUserId(userId);
        }
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a09ee8e90312405588fd950063bb797e4}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!showEditUserInfoForm@{showEditUserInfoForm}}
\index{showEditUserInfoForm@{showEditUserInfoForm}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{showEditUserInfoForm}]{\setlength{\rightskip}{0pt plus 5cm}String portal.registration.controller.EditUserInfoController.showEditUserInfoForm (
\begin{DoxyParamCaption}
\item[{@RequestParam int}]{userId, }
\item[{RenderRequest}]{request}
\end{DoxyParamCaption}
)}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a09ee8e90312405588fd950063bb797e4}


Definition at line 51 of file EditUserInfoController.java.



References portal.registration.services.UserToVoService.findById().


\begin{DoxyCode}
                                               {

                if (userToVoService.findById(userId).size() == 0) {
                        deactivateUser(userId, request);
                        SessionMessages.add(request, "user-deactivate");
                }

                return "editUserInfoForm";
        }
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a3b8074d37864402deee109774e44ea3d}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!uploadComplete@{uploadComplete}}
\index{uploadComplete@{uploadComplete}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{uploadComplete}]{\setlength{\rightskip}{0pt plus 5cm}void portal.registration.controller.EditUserInfoController.uploadComplete (
\begin{DoxyParamCaption}
\item[{ActionResponse}]{response, }
\item[{SessionStatus}]{sessionStatus}
\end{DoxyParamCaption}
)}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a3b8074d37864402deee109774e44ea3d}


Definition at line 172 of file EditUserInfoController.java.


\begin{DoxyCode}
                                                     {

                response.setRenderParameter("myaction", "userInfos");
                sessionStatus.setComplete();

        }
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_ad152ea56d1ec9c7cb1f0f79d0a6008c4}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!certificateService@{certificateService}}
\index{certificateService@{certificateService}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{certificateService}]{\setlength{\rightskip}{0pt plus 5cm}{\bf CertificateService} {\bf portal.registration.controller.EditUserInfoController.certificateService}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_ad152ea56d1ec9c7cb1f0f79d0a6008c4}


Definition at line 45 of file EditUserInfoController.java.

\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a92a1c1746c66dbf600394d8b042acc65}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!userInfoService@{userInfoService}}
\index{userInfoService@{userInfoService}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{userInfoService}]{\setlength{\rightskip}{0pt plus 5cm}{\bf UserInfoService} {\bf portal.registration.controller.EditUserInfoController.userInfoService}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a92a1c1746c66dbf600394d8b042acc65}


Definition at line 42 of file EditUserInfoController.java.

\hypertarget{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a5b22c5c2153cf26ed9ce7c515b29af04}{
\index{portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}!userToVoService@{userToVoService}}
\index{userToVoService@{userToVoService}!portal::registration::controller::EditUserInfoController@{portal::registration::controller::EditUserInfoController}}
\subsubsection[{userToVoService}]{\setlength{\rightskip}{0pt plus 5cm}{\bf UserToVoService} {\bf portal.registration.controller.EditUserInfoController.userToVoService}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classportal_1_1registration_1_1controller_1_1EditUserInfoController_a5b22c5c2153cf26ed9ce7c515b29af04}


Definition at line 48 of file EditUserInfoController.java.



The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
/Users/mikel8/Documents/Uni/workspace/Registration/src/main/java/portal/registration/controller/\hyperlink{EditUserInfoController_8java}{EditUserInfoController.java}\end{DoxyCompactItemize}
